(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(14),l=t(2),i=function(e){var n=e.notification;return null===n.message?null:"success"===n.type?r.a.createElement("div",{className:"success"},n.message):"error"===n.type?r.a.createElement("div",{className:"error"},n.message):void 0},m=function(e){var n=e.header;return r.a.createElement("h2",null,n)},s=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("tr",null,r.a.createElement("td",null,n.name),r.a.createElement("td",null,n.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return t(n.id)}}," Delete contact ")))},d=function(e){var n=e.persons,t=e.deletePerson;return r.a.createElement("table",null,r.a.createElement("tbody",null,n.map(function(e){return r.a.createElement(s,{key:e.name,person:e,deletePerson:t})})))},f=function(e){var n=e.personForm;return r.a.createElement("form",{onSubmit:n.addPerson},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n.newName,onChange:n.handleNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:n.newNumber,onChange:n.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},b=function(e){var n=e.filterForm;return r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n.filter,onChange:n.handleFilterChange}))},h=function(e){var n=e.personForm,t=e.filterForm,a=e.persons,c=e.notification;return r.a.createElement("div",null,r.a.createElement(m,{header:"Phonebook"}),r.a.createElement(i,{notification:c}),r.a.createElement(b,{filterForm:t}),r.a.createElement(m,{header:"Add a new number"}),r.a.createElement(f,{personForm:n}),r.a.createElement(m,{header:"Number"}),r.a.createElement(d,{persons:a,deletePerson:n.deletePerson}))},p=t(3),E=t.n(p),v="/api/persons",g=function(){return E.a.get(v).then(function(e){return e.data})},w=function(e){return E.a.post(v,e).then(function(e){return e.data})},y=function(e,n){return E.a.put("".concat(v,"/").concat(e),n).then(function(e){return e.data})},j=function(e){return E.a.delete("".concat(v,"/").concat(e)).then(function(e){return e.data})},C=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),i=Object(l.a)(o,2),m=i[0],s=i[1],d=Object(a.useState)(""),f=Object(l.a)(d,2),b=f[0],p=f[1],E=Object(a.useState)(""),v=Object(l.a)(E,2),C=v[0],O=v[1],N=Object(a.useState)({message:null,type:null}),F=Object(l.a)(N,2),P=F[0],k=F[1];Object(a.useEffect)(function(){g().then(function(e){c(e)})},[]);var S=C?t.filter(function(e){return e.name.toLowerCase().includes(C.toLowerCase())}):t,A=function(e,n){k({message:e,type:n}),setTimeout(function(){k({message:null,type:null})},5e3)},D={addPerson:function(e){if(e.preventDefault(),t.map(function(e){return e.name}).includes(m)){if(window.confirm("".concat(m," is already added to phonebook. Would you like update the number?"))){var n=t.find(function(e){return e.name===m}),a=Object(u.a)({},n,{number:b});y(a.id,a).then(function(e){A("'".concat(n.name,"' has been updated"),"success"),c(t.map(function(n){return n.id!==a.id?n:e}))}).catch(function(e){A("Unable to update. '".concat(n.name,"' has already been removed from server"),"error"),c(t.filter(function(e){return e.id!==n.id}))})}}else w({name:m,number:b}).then(function(e){A("'".concat(e.name,"' has been added"),"success"),c(t.concat(e)),s(""),p("")})},newName:m,handleNameChange:function(e){s(e.target.value)},newNumber:b,handleNumberChange:function(e){p(e.target.value)},deletePerson:function(e){var n=t.find(function(n){return n.id===e});window.confirm("Are you sure you want to delete ".concat(n.name,"?"))&&j(e).then(function(){A("'".concat(n.name,"' has been deleted"),"success"),c(t.filter(function(n){return n.id!==e}))}).catch(function(a){A("'".concat(n.name,"' was already deleted from server"),"error"),c(t.filter(function(n){return n.id!==e}))})}},J={filter:C,handleFilterChange:function(e){O(e.target.value)}};return r.a.createElement(h,{personForm:D,filterForm:J,persons:S,notification:P})};t(38);o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5ce88278.chunk.js.map