(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(13),c=t.n(o),u=t(14),l=t(2),i=function(e){var n=e.notification;return null===n.message?null:"success"===n.type?a.a.createElement("div",{className:"success"},n.message):"error"===n.type?a.a.createElement("div",{className:"error"},n.message):void 0},s=function(e){var n=e.header;return a.a.createElement("h2",null,n)},m=function(e){var n=e.person,t=e.deletePerson;return a.a.createElement("tr",null,a.a.createElement("td",null,n.name),a.a.createElement("td",null,n.number),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){return t(n.id)}}," Delete contact ")))},d=function(e){var n=e.persons,t=e.deletePerson;return a.a.createElement("table",null,a.a.createElement("tbody",null,n.map(function(e){return a.a.createElement(m,{key:e.name,person:e,deletePerson:t})})))},f=function(e){var n=e.personForm;return a.a.createElement("form",{onSubmit:n.addPerson},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:n.newName,onChange:n.handleNameChange})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:n.newNumber,onChange:n.handleNumberChange})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n=e.filterForm;return a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:n.filter,onChange:n.handleFilterChange}))},p=function(e){var n=e.personForm,t=e.filterForm,r=e.persons,o=e.notification;return a.a.createElement("div",null,a.a.createElement(s,{header:"Phonebook"}),a.a.createElement(i,{notification:o}),a.a.createElement(h,{filterForm:t}),a.a.createElement(s,{header:"Add a new number"}),a.a.createElement(f,{personForm:n}),a.a.createElement(s,{header:"Number"}),a.a.createElement(d,{persons:r,deletePerson:n.deletePerson}))},b=t(3),E=t.n(b),v="/api/persons",g=function(){return E.a.get(v).then(function(e){return e.data})},w=function(e){return E.a.post(v,e).then(function(e){return e.data})},y=function(e,n){return E.a.put("".concat(v,"/").concat(e),n).then(function(e){return e.data})},j=function(e){return E.a.delete("".concat(v,"/").concat(e)).then(function(e){return e.data})},C=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),i=Object(l.a)(c,2),s=i[0],m=i[1],d=Object(r.useState)(""),f=Object(l.a)(d,2),h=f[0],b=f[1],E=Object(r.useState)(""),v=Object(l.a)(E,2),C=v[0],O=v[1],N=Object(r.useState)({message:null,type:null}),P=Object(l.a)(N,2),F=P[0],k=P[1];Object(r.useEffect)(function(){g().then(function(e){o(e)})},[]);var S=C?t.filter(function(e){return e.name.toLowerCase().includes(C.toLowerCase())}):t,A=function(e,n){k({message:e,type:n}),setTimeout(function(){k({message:null,type:null})},5e3)},D={addPerson:function(e){if(e.preventDefault(),t.map(function(e){return e.name}).includes(s)){if(window.confirm("".concat(s," is already added to phonebook. Would you like update the number?"))){var n=t.find(function(e){return e.name===s}),r=Object(u.a)({},n,{number:h});y(r.id,r).then(function(e){A("'".concat(n.name,"' has been updated"),"success"),o(t.map(function(n){return n.id!==r.id?n:e}))}).catch(function(e){"Phone number is too short"===e.response.data.error||"Phone number is required"===e.response.data.error?A(e.response.data.error,"error"):404===e.response.status&&(A("'".concat(n.name,"' has been removed from the phonebook"),"error"),o(t.filter(function(e){return e.id!==n.id})))})}}else w({name:s,number:h}).then(function(e){A("'".concat(e.name,"' has been added"),"success"),o(t.concat(e)),m(""),b("")}).catch(function(e){A(e.response.data.error,"error")})},newName:s,handleNameChange:function(e){m(e.target.value)},newNumber:h,handleNumberChange:function(e){b(e.target.value)},deletePerson:function(e){var n=t.find(function(n){return n.id===e});window.confirm("Are you sure you want to delete ".concat(n.name,"?"))&&j(e).then(function(){A("'".concat(n.name,"' has been deleted"),"success"),o(t.filter(function(n){return n.id!==e}))}).catch(function(r){A("'".concat(n.name,"' was already deleted from server"),"error"),o(t.filter(function(n){return n.id!==e}))})}},J={filter:C,handleFilterChange:function(e){O(e.target.value)}};return a.a.createElement(p,{personForm:D,filterForm:J,persons:S,notification:F})};t(38);c.a.render(a.a.createElement(C,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.58ae2cf1.chunk.js.map